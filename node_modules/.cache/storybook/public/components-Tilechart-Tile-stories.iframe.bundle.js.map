{"version":3,"file":"components-Tilechart-Tile-stories.iframe.bundle.js","mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACnFA;AACA;AAAA;AAeA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAKA;AAJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAIA;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQA;AAEA;AAKA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAEA;AAGA;AACA;AAGA;AACA;AACA;AAGA;AACA;AAGA;AAAA;AAGA;AACA;AACA;AAGA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAGA;AA5JA;AA8JA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://@rrishabh/react-calender-heatmap/","webpack://@rrishabh/react-calender-heatmap/./src/components/Tilechart/Tilechart.tsx","webpack://@rrishabh/react-calender-heatmap/./src/components/Tilechart/index.css","webpack://@rrishabh/react-calender-heatmap/./src/components/Tilechart/index.css?8b9e"],"sourcesContent":[null,"import React, { useState } from \"react\";\nimport \"./index.css\";\n\nexport interface TileChartProps {\n  data: {\n    date: string;\n    status?: \"success\" | \"warning\" | \"alert\";\n  }[];\n  range?: 3 | 6 | 12; // Default to 12 months\n  onTileHover?: (\n    date: string,\n    status?: \"success\" | \"warning\" | \"alert\"\n  ) => void;\n  tileText?: string;\n}\n\n// Helper function to get the number of days in a month\nconst getDaysInMonth = (year: number, month: number) => {\n  return new Date(year, month + 1, 0).getDate();\n};\n\n// date will come in 2024-04-30T18:35:53.575Z ISO format\n// so we need to filter out all the months and years and days\nconst getFormattedDate = (date: string) => {\n  const dateObj = new Date(date);\n  const year = dateObj.getFullYear();\n  const month = dateObj.getMonth(); // Month is zero-based\n  const day = dateObj.getDate();\n  return { year, month, day };\n};\n\nconst TileChart: React.FC<TileChartProps> = ({\n  data,\n  range = 6,\n  onTileHover,\n  tileText,\n}) => {\n  const getColor = (status?: \"success\" | \"warning\" | \"alert\") => {\n    switch (status) {\n      case \"success\":\n        return \"bg-success\";\n      case \"warning\":\n        return \"bg-warning\";\n      case \"alert\":\n        return \"bg-alert\";\n      default:\n        return \"bg-default\";\n    }\n  };\n\n  const currentDate = new Date();\n  const startMonth =\n    currentDate.getMonth() - range >= 0\n      ? currentDate.getMonth() - range\n      : 12 + currentDate.getMonth() - range;\n  const startYear =\n    currentDate.getMonth() - range >= 0\n      ? currentDate.getFullYear()\n      : currentDate.getFullYear() - 1;\n  const endMonth = currentDate.getMonth();\n  const endYear = currentDate.getFullYear();\n\n  const groupedData = data.reduce((acc: any, curr: any) => {\n    const formattedDate = getFormattedDate(curr.date);\n    const key = `${formattedDate.year}-${formattedDate.month}`;\n    if (!acc[key]) {\n      acc[key] = [];\n    }\n    acc[key].push({ day: formattedDate.day, status: curr.status });\n    return acc;\n  }, {} as { [key: string]: { day: number; status?: \"success\" | \"warning\" | \"alert\" }[] });\n\n  const allMonths = [];\n  let currentMonth = startMonth;\n  let currentYear = startYear;\n\n  while (\n    currentYear < endYear ||\n    (currentYear === endYear && currentMonth <= endMonth)\n  ) {\n    const key = `${currentYear}-${currentMonth}`;\n    allMonths.push(key);\n    currentMonth++;\n    if (currentMonth > 11) {\n      currentMonth = 0;\n      currentYear++;\n    }\n  }\n  const [popup, setPopup] = useState<\n    | {\n        x: number;\n        y: number;\n        content: string;\n      }\n    | any\n  >();\n  const [popupTimeout, setPopupTimeout] = useState<NodeJS.Timeout | any>();\n\n  const handleMouseEnter = (\n    event: React.MouseEvent<HTMLDivElement>,\n    content: string,\n    status?: \"success\" | \"warning\" | \"alert\"\n  ) => {\n    if (popupTimeout) clearTimeout(popupTimeout);\n    const rect = event.currentTarget.getBoundingClientRect();\n    setPopupTimeout(\n      setTimeout(() => {\n        setPopup({ x: rect.left, y: rect.top - 3, content }); // Position the popup relative to the element\n        onTileHover && onTileHover(content, status);\n      }, 100)\n    ); // Delay before showing the popup\n  };\n\n  const handleMouseLeave = () => {\n    if (popupTimeout) clearTimeout(popupTimeout);\n    setPopupTimeout(\n      setTimeout(() => {\n        setPopup(null);\n        onTileHover && onTileHover(\"\");\n      }, 100)\n    ); // Delay before hiding the popup\n  };\n  const getOrdinalSuffix = (day: number) => {\n    if (day > 3 && day < 21) return \"th\";\n    switch (day % 10) {\n      case 1:\n        return \"st\";\n      case 2:\n        return \"nd\";\n      case 3:\n        return \"rd\";\n      default:\n        return \"th\";\n    }\n  };\n  return (\n    <div className=\"tile-chart\">\n      {allMonths.map((key) => {\n        const [year, month] = key.split(\"-\").map(Number) as [number, number];\n        const daysInMonth = getDaysInMonth(year, month);\n        const monthData = groupedData[key] || [];\n\n        return (\n          <div key={key} className=\"month-container\">\n            <span className=\"month-lable\">\n              {new Date(year, month).toLocaleString(\"default\", {\n                month: \"short\",\n              })}\n            </span>\n            <div className=\"day-tiles\">\n              {Array.from({ length: daysInMonth }, (_, i) => i + 1).map(\n                (day) => {\n                  const status = monthData.find(\n                    (d: any) => d.day === day\n                  )?.status;\n                  const dateObj = new Date(year, month, day);\n                  const date = `${dateObj.getDate()}${getOrdinalSuffix(\n                    dateObj.getDate()\n                  )} ${dateObj.toLocaleString(\"default\", {\n                    month: \"short\",\n                  })} ${String(year).slice(-2)}`;\n                  return (\n                    <div\n                      key={day}\n                      className={`day-tile ${getColor(status)}`}\n                      onMouseEnter={(event) =>\n                        handleMouseEnter(event, date, status)\n                      }\n                      onMouseLeave={handleMouseLeave}\n                    ></div>\n                  );\n                }\n              )}\n            </div>\n          </div>\n        );\n      })}\n      {popup && (\n        <div\n          className=\"popup\"\n          style={{ position: \"fixed\", top: popup.y, left: popup.x }}\n        >\n          {tileText ? tileText : popup.content}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TileChart;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tile-chart {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.month-container {\n  margin: 2px;\n}\n.day-tiles {\n  display: grid;\n  grid-template-rows: repeat(7, 1fr);\n  grid-auto-flow: column;\n  grid-gap: 4px;\n}\n.day-tile {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: calc(\n    12px - 2px\n  ); /* adjust as needed, subtracting the size of the gap */\n  height: calc(\n    12px - 2px\n  ); /* adjust as needed, subtracting the size of the gap */\n  border-radius: 2px;\n  color: white;\n  font-size: 12px;\n  gap: 2px;\n}\n\n.bg-success {\n  background-color: #9be9a8;\n  border: 1px solid #40c463;\n}\n\n.bg-warning {\n  background-color: #fcd34d;\n  border: 1px solid #f59e0b;\n}\n\n.bg-alert {\n  background-color: #f87171ab;\n  border: 1px solid #f43f5e;\n}\n\n.bg-default {\n  background-color: #ebedf0;\n  color: black;\n  border: 1px solid #1b1f230f;\n}\n\n.month-lable {\n  font-size: 13px;\n}\n\n.popup {\n    position: absolute;\n    background-color: black;\n    border: 1px solid black;\n    border-radius: 7px; /* Adjust the border radius */\n    color: white;\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\n    z-index: 1000;\n    padding: 5px;\n    text-align: center;\n    font-size: 12px;\n    min-width: 60px;\n    transform: translate(-50%, -100%);\n    transition: top 0.2s ease-in-out, left 0.2s ease-in-out; /* Use the ease-in-out timing function */\n  }`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Tilechart/index.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,aAAa;EACb,eAAe;AACjB;;AAEA;EACE,WAAW;AACb;AACA;EACE,aAAa;EACb,kCAAkC;EAClC,sBAAsB;EACtB,aAAa;AACf;AACA;EACE,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB;;GAEC,EAAE,sDAAsD;EACzD;;GAEC,EAAE,sDAAsD;EACzD,kBAAkB;EAClB,YAAY;EACZ,eAAe;EACf,QAAQ;AACV;;AAEA;EACE,yBAAyB;EACzB,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,yBAAyB;AAC3B;;AAEA;EACE,2BAA2B;EAC3B,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,YAAY;EACZ,2BAA2B;AAC7B;;AAEA;EACE,eAAe;AACjB;;AAEA;IACI,kBAAkB;IAClB,uBAAuB;IACvB,uBAAuB;IACvB,kBAAkB,EAAE,6BAA6B;IACjD,YAAY;IACZ,2CAA2C;IAC3C,aAAa;IACb,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,eAAe;IACf,iCAAiC;IACjC,uDAAuD,EAAE,wCAAwC;EACnG\",\"sourcesContent\":[\".tile-chart {\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\n\\n.month-container {\\n  margin: 2px;\\n}\\n.day-tiles {\\n  display: grid;\\n  grid-template-rows: repeat(7, 1fr);\\n  grid-auto-flow: column;\\n  grid-gap: 4px;\\n}\\n.day-tile {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  width: calc(\\n    12px - 2px\\n  ); /* adjust as needed, subtracting the size of the gap */\\n  height: calc(\\n    12px - 2px\\n  ); /* adjust as needed, subtracting the size of the gap */\\n  border-radius: 2px;\\n  color: white;\\n  font-size: 12px;\\n  gap: 2px;\\n}\\n\\n.bg-success {\\n  background-color: #9be9a8;\\n  border: 1px solid #40c463;\\n}\\n\\n.bg-warning {\\n  background-color: #fcd34d;\\n  border: 1px solid #f59e0b;\\n}\\n\\n.bg-alert {\\n  background-color: #f87171ab;\\n  border: 1px solid #f43f5e;\\n}\\n\\n.bg-default {\\n  background-color: #ebedf0;\\n  color: black;\\n  border: 1px solid #1b1f230f;\\n}\\n\\n.month-lable {\\n  font-size: 13px;\\n}\\n\\n.popup {\\n    position: absolute;\\n    background-color: black;\\n    border: 1px solid black;\\n    border-radius: 7px; /* Adjust the border radius */\\n    color: white;\\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\\n    z-index: 1000;\\n    padding: 5px;\\n    text-align: center;\\n    font-size: 12px;\\n    min-width: 60px;\\n    transform: translate(-50%, -100%);\\n    transition: top 0.2s ease-in-out, left 0.2s ease-in-out; /* Use the ease-in-out timing function */\\n  }\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./index.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\nif (module.hot) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n  if (!a && b || a && !b) {\n    return false;\n  }\n  var p;\n  for (p in a) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (a[p] !== b[p]) {\n      return false;\n    }\n  }\n  for (p in b) {\n    if (isNamedExport && p === \"default\") {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (!a[p]) {\n      return false;\n    }\n  }\n  return true;\n};\n    var isNamedExport = !content.locals;\n    var oldLocals = isNamedExport ? namedExport : content.locals;\n\n    module.hot.accept(\n      \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./index.css\",\n      function () {\n        if (!isEqualLocals(oldLocals, isNamedExport ? namedExport : content.locals, isNamedExport)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = isNamedExport ? namedExport : content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[8].use[1]!./index.css\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":[],"sourceRoot":""}